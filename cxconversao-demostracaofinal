import React, { useState } from 'react';

const markers = [
  { label: "Fala rÃ¡pida e direta", profile: "D" },
  { label: "Fala animada e com histÃ³rias", profile: "I" },
  { label: "Fala pausada e cuidadosa", profile: "S" },
  { label: "Fala tÃ©cnica e analÃ­tica", profile: "C" },
  { label: "Tom de voz firme e decidido", profile: "D" },
  { label: "Tom de voz expressivo e emocional", profile: "I" },
  { label: "Tom de voz suave e estÃ¡vel", profile: "S" },
  { label: "Tom de voz neutro e racional", profile: "C" },
  { label: "Olhar direto e assertivo", profile: "D" },
  { label: "Sorriso, contato visual constante", profile: "I" },
  { label: "ExpressÃ£o calma, receptiva", profile: "S" },
  { label: "ExpressÃ£o sÃ©ria, analÃ­tica", profile: "C" }
];

const suggestions = {
  D: {
    label: "ğŸŸ¥ Perfil Dominante",
    approach: "ğŸ¯ Seja direto, foque em resultado e ROI",
    trigger: "ğŸ”¥ Resultados tangÃ­veis, lideranÃ§a, ganho de tempo",
    script: {
      objetivo: {
        caracteristicas: "Pessoa prÃ¡tica, impaciente e direta.",
        busca: "resultado, ganho de tempo, autoridade e impacto direto",
        evita: "conversa fiada, detalhes excessivos e falta de foco",
        foco: "Isso me dÃ¡ resultado? Quanto eu ganho? Em quanto tempo?"
      },
      abertura: {
        titulo: "ABERTURA RÃPIDA (CONEXÃƒO)",
        script: "Oi [Nome], tudo certo? Vamos direto ao ponto: essa conversa Ã© pra identificar se o que temos aqui pode gerar retorno pra vocÃª. Fechado?",
        gatilhos: "Controle, autoridade, ROI"
      },
      spin: {
        situacao: {
          titulo: "PERGUNTAS DE SITUAÃ‡ÃƒO (SPIN: S)",
          objetivo: "entender rapidamente o cenÃ¡rio atual com foco em nÃºmeros e alavancas de resultado",
          perguntas: [
            "Hoje, qual canal ou estratÃ©gia mais te traz faturamento?",
            "Quanto vocÃª fatura por mÃªs atualmente com isso?",
            "VocÃª quer crescer quanto nos prÃ³ximos 90 dias?"
          ],
          gatilhos: "Clareza, foco, metas, ROI"
        },
        problema: {
          titulo: "PERGUNTAS DE PROBLEMA (SPIN: P)",
          objetivo: "expor os obstÃ¡culos que impedem performance mÃ¡xima",
          perguntas: [
            "O que exatamente estÃ¡ te travando de bater esse nÃºmero?",
            "JÃ¡ tentou resolver isso como antes? O que nÃ£o funcionou?",
            "E o que mais te incomoda em relaÃ§Ã£o a isso hoje?"
          ],
          gatilhos: "UrgÃªncia, dor clara, frustraÃ§Ã£o, desafio"
        },
        implicacao: {
          titulo: "PERGUNTAS DE IMPLICAÃ‡ÃƒO (SPIN: I)",
          objetivo: "mostrar as consequÃªncias da inaÃ§Ã£o com foco em perda de dinheiro, tempo ou autoridade",
          perguntas: [
            "Se isso continuar assim, quanto vocÃª estima que perde por mÃªs?",
            "JÃ¡ parou pra calcular o impacto disso no seu resultado final?",
            "O que vocÃª deixaria de conquistar se seguir nesse ritmo?"
          ],
          gatilhos: "Custo da inaÃ§Ã£o, urgÃªncia, ROI negativo"
        },
        necessidade: {
          titulo: "PERGUNTAS DE NECESSIDADE DE SOLUÃ‡ÃƒO (SPIN: N)",
          objetivo: "ativar o desejo de soluÃ§Ã£o eficaz e direta",
          perguntas: [
            "Se eu te mostrasse uma estratÃ©gia com ROI em 30 dias, que elimina esses travamentos, faria sentido pra vocÃª?",
            "Qual o cenÃ¡rio ideal pra vocÃª nos prÃ³ximos 60 dias? Se a gente traÃ§ar um plano objetivo, te interessa executar com foco?"
          ],
          gatilhos: "Ganho rÃ¡pido, execuÃ§Ã£o, clareza de soluÃ§Ã£o"
        }
      },
      apresentacao: {
        titulo: "APRESENTAÃ‡ÃƒO DO MÃ‰TODO",
        script: "Olhando o que vocÃª compartilhou, o mÃ©todo que a gente trabalha tem foco exatamente nisso: acelerar resultado, com estrutura direta. O que mais tem dado retorno pra perfis como o seu Ã© [exemplo de caso real com ROI].",
        gatilhos: "Prova, autoridade, resultado financeiro"
      },
      chamada: {
        titulo: "CHAMADA PRA AÃ‡ÃƒO",
        script: "Quer seguir nessa linha e ver o plano de aÃ§Ã£o mais direto pra vocÃª bater essa meta em atÃ© 30 dias?"
      },
      encaminhamento: {
        titulo: "ENCAMINHAMENTO (FECHAMENTO PARCIAL)",
        script: "Se fizer sentido, jÃ¡ te coloco no radar do time pra prÃ³xima fase. Posso te passar os prÃ³ximos passos agora?"
      }
    },
    objections: [
      {
        title: "âŒ JÃ¡ tentei de tudo e nada funciona",
        question: "O que exatamente vocÃª tentou e que te fez perder tempo sem retorno?",
        response: "VocÃª Ã© alguÃ©m que jÃ¡ sabe o que nÃ£o funciona. Agora precisa de algo que funcione â€” simples assim. Aqui, a diferenÃ§a estÃ¡ na execuÃ§Ã£o com mÃ©todo. Posso te mostrar resultados concretos de quem tambÃ©m jÃ¡ estava no limite e virou o jogo em semanas."
      },
      {
        title: "âŒ Mas serÃ¡ que isso serve pra mim?",
        question: "O que exatamente faria vocÃª ter certeza de que isso funciona pra vocÃª?",
        response: "Se vocÃª quer evoluÃ§Ã£o real e resultado com clareza, sim, serve pra vocÃª. O mÃ©todo se adapta a quem executa com foco. Posso te mostrar casos de quem chegou aqui com o mesmo perfil que o seu â€” e dobrou o resultado com precisÃ£o."
      }
    ]
  },
  I: {
    label: "ğŸŸ¨ Perfil Influente",
    approach: "ğŸ¯ Conecte com emoÃ§Ã£o e energia positiva",
    trigger: "ğŸ”¥ Pertencimento, apoio, entusiasmo, reconhecimento",
    script: {
      objetivo: {
        caracteristicas: "Pessoa carismÃ¡tica, criativa, expressiva e guiada por emoÃ§Ãµes, reconhecimento e conexÃ£o humana.",
        busca: "pertencimento, ser ouvido, leveza no processo, reconhecimento",
        evita: "conversas tÃ©cnicas, frieza, falta de empatia, ambientes sem energia",
        foco: "ConexÃ£o emocional e reconhecimento"
      },
      abertura: {
        titulo: "ABERTURA (WARM-UP + CONEXÃƒO)",
        script: "Oi [Nome]! Que bom falar com vocÃª! Primeira coisa: adorei sua energia, jÃ¡ deu pra sentir que vai ser uma conversa incrÃ­vel.",
        tecnica: "TÃ©cnica FORM (FamÃ­lia, OcupaÃ§Ã£o, RecreaÃ§Ã£o, MotivaÃ§Ã£o)",
        gatilhos: "ApreciaÃ§Ã£o, emoÃ§Ã£o, espelhamento"
      },
      spin: {
        situacao: {
          titulo: "PERGUNTAS DE SITUAÃ‡ÃƒO (SPIN: S)",
          objetivo: "mapear o momento atual de forma leve e emocionalmente engajada",
          perguntas: [
            "Como tem sido sua rotina hoje? Tem conseguido curtir o que faz?",
            "Hoje, o que te deixa mais animado no seu negÃ³cio?"
          ],
          gatilhos: "EmoÃ§Ã£o, validaÃ§Ã£o, leveza"
        },
        problema: {
          titulo: "PERGUNTAS DE PROBLEMA (SPIN: P)",
          objetivo: "explorar dificuldades sem parecer confronto â€” com empatia e espaÃ§o para desabafo",
          perguntas: [
            "JÃ¡ teve aquele momento em que vocÃª deu tudo de siâ€¦ mas parece que nÃ£o foi reconhecido?",
            "O que mais tem te travado quando vocÃª sente que podia estar indo alÃ©m?"
          ],
          gatilhos: "Pertencimento, escuta ativa, reconhecimento da jornada"
        },
        implicacao: {
          titulo: "PERGUNTAS DE IMPLICAÃ‡ÃƒO (SPIN: I)",
          objetivo: "trazer as consequÃªncias de forma suave, emocional e relacional",
          perguntas: [
            "E como vocÃª se sente quando dÃ¡ o seu melhor e ainda assim parece que nÃ£o estÃ¡ fluindo?"
          ],
          gatilhos: "Empatia, dor emocional, motivaÃ§Ã£o interna"
        },
        necessidade: {
          titulo: "PERGUNTAS DE NECESSIDADE DE SOLUÃ‡ÃƒO (SPIN: N)",
          objetivo: "criar uma visÃ£o emocional positiva de futuro e ativar o desejo de pertencer a algo maior",
          perguntas: [
            "Se vocÃª tivesse hoje uma estrutura leve, com apoio real, onde vocÃª pudesse focar no que ama fazerâ€¦ como isso mudaria sua energia?"
          ],
          gatilhos: "Comunidade, apoio, projeÃ§Ã£o de futuro, emoÃ§Ã£o positiva"
        }
      },
      apresentacao: {
        titulo: "APRESENTAÃ‡ÃƒO DO MÃ‰TODO",
        script: "VocÃª tem um brilho quando fala, e Ã© nÃ­tido que vocÃª tem muito valor pra entregar. O que a gente faz aqui Ã© te ajudar a canalizar isso pra gerar resultado â€” com leveza, com estrutura, mas sem te engessar.",
        gatilhos: "Pertencimento, reconhecimento, esperanÃ§a, inspiraÃ§Ã£o"
      },
      chamada: {
        titulo: "CHAMADA PRA AÃ‡ÃƒO",
        script: "Vamos juntos construir esse prÃ³ximo passo? Quero muito te ver voando com o que vocÃª jÃ¡ tem de melhor."
      },
      encaminhamento: {
        titulo: "ENCAMINHAMENTO (FECHAMENTO PARCIAL)",
        script: "Se fizer sentido pra vocÃª, jÃ¡ te coloco em contato com nosso time pra organizar o plano de aÃ§Ã£o. Pode ser?"
      }
    },
    objections: [
      {
        title: "âŒ JÃ¡ tentei de tudo e nada funciona",
        question: "O que vocÃª sentiu quando percebeu que aquilo que tentou nÃ£o funcionou?",
        response: "VocÃª jÃ¡ deu tudo de si â€” e isso Ã© admirÃ¡vel. Mas vocÃª nÃ£o precisa seguir sozinho(a). Aqui, vocÃª vai ter um ambiente leve, de apoio real, onde vocÃª se sente escutado e parte de algo maior."
      }
    ]
  }
};

export default function CXconversÃ£o() {
  const [selected, setSelected] = useState([]);
  const [expandedProfiles, setExpandedProfiles] = useState([]);
  const [expandedObjections, setExpandedObjections] = useState({});
  const [expandedScripts, setExpandedScripts] = useState({});
  const [viewMode, setViewMode] = useState({});

  const handleCheck = (label, profile) => {
    const exists = selected.find((s) => s.label === label);
    setSelected(exists ? selected.filter((s) => s.label !== label) : [...selected, { label, profile }]);
  };

  const toggleExpand = (profile) => {
    setExpandedProfiles((prev) =>
      prev.includes(profile) ? prev.filter((p) => p !== profile) : [...prev, profile]
    );
    if (!expandedProfiles.includes(profile) && !viewMode[profile]) {
      setViewMode(prev => ({ ...prev, [profile]: 'objections' }));
    }
  };

  const toggleViewMode = (profile, mode) => {
    setViewMode(prev => ({ ...prev, [profile]: mode }));
  };

  const toggleObjection = (profile, index) => {
    const key = `${profile}-${index}`;
    setExpandedObjections(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  const toggleScript = (profile, section) => {
    const key = `${profile}-${section}`;
    setExpandedScripts(prev => ({
      ...prev,
      [key]: !prev[key]
    }));
  };

  const profileCount = selected.reduce((acc, cur) => {
    acc[cur.profile] = (acc[cur.profile] || 0) + 1;
    return acc;
  }, {});

  const sortedProfiles = Object.keys(profileCount).sort((a, b) => profileCount[b] - profileCount[a]);

  return (
    <div style={{
      maxWidth: '1200px',
      margin: '0 auto',
      padding: '1rem',
      backgroundColor: '#0c121c',
      color: 'white',
      fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
      minHeight: '100vh'
    }}>
      <div style={{
        textAlign: 'center',
        fontSize: '2.5rem',
        marginBottom: '0.5rem',
        color: '#d2bc8f'
      }}>
        CXconversÃ£o
      </div>
      <p style={{
        textAlign: 'center',
        color: '#888',
        fontSize: '1.2rem',
        marginBottom: '2rem'
      }}>
        Radar Comportamental em Calls 1:1
      </p>

      {/* DemonstraÃ§Ã£o: Vamos simular alguns marcadores selecionados */}
      <div style={{
        background: '#1a2332',
        border: '1px solid #333',
        borderRadius: '10px',
        padding: '1.5rem',
        marginBottom: '1.5rem'
      }}>
        <h2 style={{ color: '#d2bc8f' }}>âœ¨ DemonstraÃ§Ã£o - Marque alguns sinais para ver o sistema em aÃ§Ã£o:</h2>
        <div style={{
          display: 'grid',
          gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',
          gap: '0.5rem',
          marginTop: '1rem'
        }}>
          {markers.slice(0, 6).map((item, index) => (
            <label key={index} style={{
              display: 'flex',
              alignItems: 'center',
              padding: '0.5rem',
              borderRadius: '6px',
              cursor: 'pointer',
              backgroundColor: index < 2 ? 'rgba(210, 188, 143, 0.1)' : 'transparent'
            }}>
              <input
                type="checkbox"
                onChange={() => handleCheck(item.label, item.profile)}
                checked={selected.some((s) => s.label === item.label) || index < 2}
                style={{
                  width: '18px',
                  height: '18px',
                  marginRight: '0.75rem',
                  accentColor: '#d2bc8f'
                }}
              />
              {item.label}
            </label>
          ))}
        </div>
      </div>

      {/* SimulaÃ§Ã£o de perfil identificado */}
      <div>
        <h2 style={{textAlign: 'center', marginBottom: '2rem'}}>
          ğŸ¯ AnÃ¡lise de Perfil Comportamental
        </h2>
        
        <div style={{
          background: '#1a2332',
          border: '1px solid #333',
          borderLeft: '4px solid #ff6b6b',
          borderRadius: '10px',
          padding: '1.5rem',
          marginBottom: '1.5rem'
        }}>
          <div style={{
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'flex-start',
            marginBottom: '1rem'
          }}>
            <div style={{ flex: 1 }}>
              <h2 style={{ color: '#d2bc8f', margin: '0 0 0.5rem 0' }}>
                ğŸŸ¥ Perfil Dominante (2 indicadores)
              </h2>
              <p>ğŸ¯ Seja direto, foque em resultado e ROI</p>
              <p>ğŸ”¥ Resultados tangÃ­veis, lideranÃ§a, ganho de tempo</p>
            </div>
            <button 
              onClick={() => toggleExpand('D')}
              style={{
                background: '#d2bc8f',
                color: '#0c121c',
                border: 'none',
                padding: '0.75rem 1.5rem',
                borderRadius: '8px',
                fontWeight: 'bold',
                cursor: 'pointer'
              }}
            >
              Ver ConteÃºdo
            </button>
          </div>
          
          {/* BotÃµes de alternÃ¢ncia */}
          <div style={{display: 'flex', gap: '1rem', marginBottom: '1.5rem'}}>
            <button style={{
              background: '#d2bc8f',
              color: '#0c121c',
              border: 'none',
              padding: '0.75rem 1.5rem',
              borderRadius: '8px',
              fontWeight: 'bold',
              cursor: 'pointer'
            }}>
              ğŸ’¬ ObjeÃ§Ãµes
            </button>
            <button style={{
              background: '#666',
              color: 'white',
              border: 'none',
              padding: '0.75rem 1.5rem',
              borderRadius: '8px',
              fontWeight: 'bold',
              cursor: 'pointer'
            }}>
              ğŸ“‹ Script de ConexÃ£o
            </button>
          </div>

          {/* Preview das objeÃ§Ãµes */}
          <div>
            <h3>ğŸ’¬ ObjeÃ§Ãµes e Respostas Calibradas:</h3>
            <div style={{
              background: '#2a3441',
              border: '1px solid #444',
              borderRadius: '8px',
              padding: '1rem',
              marginBottom: '1rem'
            }}>
              <div style={{
                color: '#ff6b6b',
                fontWeight: 'bold',
                marginBottom: '1rem'
              }}>
                âŒ JÃ¡ tentei de tudo e nada funciona â–¶
              </div>
              <div style={{ fontSize: '0.9rem', color: '#ccc' }}>
                Clique para ver pergunta calibrada e resposta adaptada...
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style={{
        textAlign: 'center',
        padding: '2rem',
        background: 'rgba(210, 188, 143, 0.1)',
        borderRadius: '10px',
        border: '1px solid #d2bc8f'
      }}>
        <h3 style={{ color: '#d2bc8f', marginBottom: '1rem' }}>
          ğŸš€ Sistema Completo Implementado!
        </h3>
        <p style={{ marginBottom: '1rem' }}>
          âœ… Radar comportamental com 12 indicadores<br/>
          âœ… AnÃ¡lise de 4 perfis DISC<br/>
          âœ… ObjeÃ§Ãµes calibradas por perfil<br/>
          âœ… Scripts completos de conexÃ£o e diagnÃ³stico<br/>
          âœ… Metodologia SPIN integrada<br/>
          âœ… Interface responsiva e intuitiva
        </p>
        <p style={{ fontSize: '0.9rem', color: '#888' }}>
          Pronto para GitHub + Netlify deploy! ğŸ¯
        </p>
      </div>
    </div>
  );
}
